^ bf-rules @article|i:brute-force-rules

> Задачи с орлом и решкой
> Задачи на падение двух кубиков
> Задача на нахождение всех латинских квадратов 3-го порядка
> Некоторые из простых задач из "Правила суммы" переместить сюда
> Задачи из "Перебор вариантов" здесь (https://mathus.ru/math/kombinatorika.pdf)
> Сколько есть способов расположить три крестика на поле размером 3 на 3?

@task
    title: Цифровой хоровод
    statement: |
        Можно ли выписать девять чисел $1, 2, \ldots, 9$ по кругу так, чтобы сумма никаких двух соседних чисел не делилась ни на $3$, ни на $5$, ни на $7$?
    hint: |
        Используйте дерево вариантов.
        На одном листе рисуйте дерево, на других листах проводите вычисления и проверки на деление.
    solution: |
        Решать эту задачу мы будем через построение дерева вариантов.
        Так как числа выписаны по кругу, то нет никакой разницы, с какого числа начинать.
        Начнем с числа $3$.
        Найдем всех подходящих ему соседей:

        @math
            \begin{array}{r}
                \textbf{3} \ + & 1 & 2 & 4 & 5 & 6 & 7 & 8 & 9 \\
                =     & 4 & 5 & 7 & 8 & 9 & 10 & 11 & 12 \\
                      & + & - & - & + & - & - & + & -
            \end{array}

        Рядом с цифрой $3$ можно поставить цифры $1, 5$ и $8$.
        Отображаем эти данные на дереве:

        @image
            src: assets/practicum/numbers-circle-tree-step-1.svg
            width: 200px
            invertible: true

        Можно выбрать любую ветку для продолжения.
        Для простоты будем всегда выбирать ветку с наименьшим числом.
        В данном случае это ветка с цифрой $1$.
        Ищем всех соседей для цифры $1$, не забывая, что цифру $3$ мы уже использовали:

        @math
            \begin{array}{r}
                3, \ \textbf{1} \ + & 2 & 4 & 5 & 6 & 7 & 8 & 9 \\
                =          & 3 & 5 & 6 & 7 & 8 & 9 & 10 \\
                           & - & - & - & - & + & - & -
            \end{array}

        Итак, продолжить ветку с цифрой $1$ можем только веткой с цифрой $7$.
        Рисуем ее на дереве:

        @image
            src: assets/practicum/numbers-circle-tree-step-2.svg
            width: 250px
            invertible: true

        Ну и так далее. Ищем соседей, рисуем ветки, выбираем наименьшую, ищем соседей, рисуем ветки...
        Некоторые ветки будет невозможно продолжить.
        Тогда откатываемся и продолжаем с предыдущими вариантами.

        У меня получилось вот такое дерево:

        @image
            src: assets/practicum/numbers-circle-tree-full.svg
            width: 500px
            invertible: true

        Не забываем проверить, чтобы сумма последнего числа (у меня это $8$) с самым первым (у меня это $3$) тоже удовлетворяла условию задачи, ведь цифры на самом деле записываются по кругу, так что $3$ и $8$ это тоже соседи!
        
        Выписываем подряд все цифры в получившейся финальной ветке и получаем ответ к задаче:

        $$ 3, 1, 7, 4, 9, 2, 6, 5, 8 $$

    answer: |
        Выписать числа таким образом можно. Пример:

        $$ 3, 1, 7, 4, 9, 2, 6, 5, 8 $$

@task
    title: Ставки на спорт!
    statement: |
        В соревнованиях по хоккею участвовали пять команд: $A, B, C, D, E$.
        В конкурсе знатоков один участник предположил, что они займут места в порядке $A, B, C, D, E$, а другой предсказал порядок $D, A, E, C, B$.
        
        После окончания соревнований оказалось, что первый не угадал не только место хотя бы одной из команд, но даже какую-либо пару следующих друг за другом команд.
        Второй же угадал места двух команд и две пары следующих друг за другом команд.
        В каком порядке расположитилсь команды?
    hint: |
        Как основу для перебора используйте тот факт, что второй знаток правильно угадал "две пары следующих друг за другом команд".
    solution: |
        Из условия нам известно, что второй знаток правильно угадал "две пары следующих друг за другом команд".
        Обозначим первую пару команд за $XY$, а вторую за $NM$.
        Всего существует $3$ "шаблона" расположить эти команды:

        $$ 1) \ XY|NM|? \qquad 2) \ ?|XY|NM \qquad 3) \ XY|?|NM $$

        Вместо знаков вопроса стоит буква еще одной недостающей команды.
        Разберемся с первым шаблоном.
        По условию в этом шаблоне мы можем использовать только следующие пары команд: $ DA, \ AE, \ EC, \ CB $.
        Подставляем их **по очереди** и проверяем, подходят ли получившиеся комбинации под оба условия.

        $$ DA|EC|B \quad - \\ DA|CB|E \quad - \\ AE|CB|D \quad - \\ EC|DA|B \quad - \\ CB|DA|E \quad - \\ CB|AE|D \quad - $$

        Ни одна комбинация не удовлетворяет двум условиям.
        Пробуем второй шаблон:

        $$ B|DA|EC \quad - \\ E|DA|CB \quad + $$

        Последняя комбинация удовлетворяет обоим условиям.
        Итак, команды расположились в следующем порядке:

        $$ EDACB $$
    answer: |
        $ EDACB $

@task
    title: Пятибуквенный словарь
    tags:
        - ЕГЭ Информатика
    statement: |
        Василий составил список всех $5$-буквенных слов, которые можно составить из букв "А", "Б", "В".
        Буквы записываются в алфавитном порядке.
        Вот начало списка:

        1. ААААА
        2. ААААБ
        3. ААААВ
        4. АААБА
        5. АААББ

        Запишите слово, которое стоит на $150$-м месте в этом списке.
    hint: |
        Посчитайте, сколько раз поменяется пятая буква на пути к $150$-му слову.
        Для определения букв используйте остатки от деления на $3$.
    solution: |
        В этой задаче Василий придумал алгоритм перебора слов и тем самым выполнил [второе правило](^bf-rules) перебора.
        Так он смог получить список из всех слов.
        Нам же нужно детально разобрать этот алгоритм и найти способ нахождения конкретного слова по его номеру в списке.


        Обратите внимание на последнюю, $5$-ю букву.
        Она постоянно меняется.
        В списке из $150$ слов последняя буква изменилась $149$ раз, на единицу меньше, чем количество слов, ведь первое слово уже было дано и никак не изменялось:

        @math
            \begin{array}{}
                \overbrace{\text{ААААА}}^{Слово \ 1} & & \overbrace{\text{ААААБ}}^{Слово \ 2} & \cdots & \overbrace{\text{?????}}^{Слово \ 149} & & \overbrace{\text{?????}}^{Слово \ 150} \\
                & \underbrace{\text{A} \Rightarrow \text{Б}}_{\text{Замена 1}} & & \underbrace{\text{Б} \Rightarrow \text{В}}_{\text{Замена 2}} & \dots & \underbrace{\text{?} \Rightarrow \text{?}}_{\text{Замена 149}} &
            \end{array}

        Если мы начинаем с буквы "A", то какая же буква будет после $149$ замен?
        Для удобства построим таблицу:

        @math
            \begin{array}{r|ccc|ccc|c|}
                \text{Буква} & \text{А} & \text{Б} & \text{В} & \text{А} & \text{Б} & \text{В} & \cdots & ? \\
                \text{Замена} & 0 & 1 & 2 & 3 & 4 & 5 & \cdots & 149
            \end{array}

        Замечаем, что номера замены с буквой "А" делятся нацело на $3$: $0/3, 3/3, \ldots$<br>
        Номера замены с буквой "Б" при делении на $3$ дают остаток $1$: $1/3, 4/3, \ldots$<br>
        Наконец, номера замены с буквой "В" при делении на $3$ дают остаток $2$: $2/3, 5/3, \ldots$<br>

        Теперь мы можем узнать, что будет после $149$ замен.
        Делим $149$ на $3$ и получаем остаток $2$.
        Мы уже выяснили, что остаток $2$ связан с буквой "В".
        Значит, после $149$ замен буква "A" станет буквой "В".

        @math
            \begin{array}{r|ccc|ccc|c|}
                \text{Буква} & \text{А} & \text{Б} & \text{В} & \text{А} & \text{Б} & \text{В} & \cdots & \text{В} \\
                \text{Замена} & 0 & 1 & 2 & 3 & 4 & 5 & \cdots & 149 \\
                \text{Остаток} & 0 & 1 & 2 & 0 & 1 & 2 & \cdots & 2
            \end{array}

        Итак, у слова на $150$-м месте в списке последняя буква это "В":

        $$ \boxed{ ? \ ? \ ? \ ? \ \text{В} } $$

        Четвертая буква в слове меняется после каждых $3$-х изменений пятой буквы.
        Всего пятая буква изменилась $149$ раз, значит четвертая буква изменилась $149 : 3 = 49.(6)$, то есть $49$ целых раз.
        
        Раз произошло $49$ замен четвертой буквы, то, прямо как и с пятой буквой, мы можем $49$ поделить на $3$ и остаток от деления укажет на нужную букву.
        $49 = 16 \cdot 3 + 1$, то есть остаток равен $1$. А остаток $1$ связан с буквой $Б$.

        Итак, у слова на $150$-м месте в списке четвертая буква это "Б":

        $$ \boxed{ ? \ ? \ ? \ \text{Б} \ \text{В} } $$

        Точно такие же рассуждения проводим для третьей буквы.
        Она меняется после $3$-х изменений четвертой буквы, но и сама четвертая меняется после $3$-х изменений пятой буквы.
        Стало быть, третья буква меняется после каждых $3\cdot 3 = 9$ изменений пятой буквы.

        $149 : 9 = 16.(5)$, то есть $16$ раз поменялась третья буква. $16 = 3 \cdot 5 + 1$, остаток равен $1$.
        Итак, у слова на $150$-м месте в списке третья буква это тоже "Б":

        $$ \boxed{ ? \ ? \ \text{Б} \ \text{Б} \ \text{В} } $$

        Вторая буква меняется после каждых $3\cdot 3\cdot 3 = 27$ изменений пятой буквы.
        $149 : 27 = 5.(518)$, то есть $5$ раз поменялась вторая буква. $5 = 3 \cdot 1 + 2$, остаток равен $2$, что означает букву "В":

        $$ \boxed{ ? \ \text{В} \ \text{Б} \ \text{Б} \ \text{В} } $$

        Первая буква меняется после каждого $3\cdot 3\cdot 3\cdot 3 = 81$ изменения пятой буквы.
        $149 : 81 = 1.8\ldots$, то есть всего $1$ раз изменилась буква. С "А" на "Б".

        $$ \boxed{ \text{Б} \ \text{В} \ \text{Б} \ \text{Б} \ \text{В} } $$
    answer: |
        На $150$-м месте в списке стоит слово "БВББВ".

@example
    title: Искатель чисел
    task: |
        Найдите все трехзначные чисела, сумма цифр которых равна $7$.
    solution: |
        Числа коротко записываются и хорошо друг от друга отличаются.
        Нет нужны давать им уникальные обозначения.
        Поэтому первый пункт из [правил перебора](i:brute-force-rules) автоматически выполнен.

        А вот с порядком сложнее.
        Если немного прикинуть, подобрать пару таких чисел, то быстро становится понятно, что их много.
        Значит нужно выписывать так, чтобы было удобно получать следующее число, и в то же время не допустить пропусков или повторений.

        Разделим все трехзначные числа на $7$ столбиков.
        Первый столбик состоит из чисел, которые начинаются на цифру $7$.
        Такое число только одно:

        $$ 700 $$

        Во втором столбце все числа, которые начинаются с цифры $6$.
        При этом оставшиеся две цифры в сумме должны дать $1$, чтобы $6 + 1 = 7$.

        @math
            \begin{matrix}
                700 & 601
                \\
                & 610
            \end{matrix}

        Обратите внимание, что при движении вниз по столбцу (из $601$ в $610$) вторая цифра увеличивается на единицу ($0$ в $1$), а третья уменьшается ($1$ в $0$).
        Продолжаем строить столбцы по такой же схеме:

        @math
            \begin{matrix}
            700 & 601 & 502 & 403 & 304 & 205 & 106
            \\
                & 610 & 511 & 412 & 313 & 214 & 115
            \\
                &     & 520 & 421 & 322 & 223 & 124
            \\
                &     &     & 430 & 331 & 232 & 133
            \\
                &     &     &     & 340 & 241 & 142
            \\
                &     &     &     &     & 250 & 151
            \\
                &     &     &     &     &     & 160
            \end{matrix}

        Всего мы нашли $34$ трехзначных числа, сумма цифр которых равна $7$.

@example
    title: Великий стратег
    task: |
        В компьютерной стратегии глобальная карта разбита на сетку размером $3 \times 3$.
        В начале игры под контролем игрока находятся три случайных участка.
        Сколько