^ bf-rules @article|i:brute-force-rules

@task
    title: Орел или решка?
    statement: |
        Юля $4$ раза подряд подбросила монетку.
        Найдите все возможные результаты этих подбрасываний.
    solution: |
        В результате броска может выпасть орел или решка.
        Орел будем обозначать буквой "О", а решку "Р".
        Так мы выполнили [первое правило](^bf-rules) перебора.

        Теперь перейдем к перебору вариантов.
        Начнем с варианта, когда орел не выпал ни разу, то есть все $4$ броска выпадала только решка.
        Такой вариант всего $1$:

        $$ РРРР $$

        Теперь перечислим все варианты, когда выпал только один орел.
        Для этого по очереди заменяем "Р" на "О".

        @math
            ОРРР \\
            РОРР \\
            РРОР \\
            РРРО \\

        Заметьте, что "О" как-бы пробегает по буква "Р" справа налево.
        Всего $4$ варианта с одним орлом.

        Теперь запишем все варианты, когда выпало два орла.
        Сначала фиксируем первую "О" в начале и двигаем только вторую "О".
        Потом сдвигаем первую "О" на позицию вперед и снова двигаем только вторую.
        
        @math
            \begin{align*}
            &\textbf{О}ОРР \quad Р\textbf{О}ОР \quad РР\textbf{О}О \\
            &\textbf{О}РОР \quad Р\textbf{О}РО \\
            &\textbf{О}РРО \\
            \end{align*}

        Всего $6$ вариантов с двумя орлами.
        
        Теперь перечислим варианты с тремя орлами.
        Здесь можно сделать тот же финт, что и с одним орлом, только пробегать будет уже буква "Р".
        Получим $4$ варианта:

        $$ РООО \\ ОРОО \\ ООРО \\ ОООР $$

        Наконец, не забываем про еще один вариант, когда все $4$ раз подряд выпал орел.

        $$ ОООО $$

        Итак, всего $1 + 4 + 6 + 4 + 1 = 16$ возможных результатов.
    answer: |
        Всего $16$ возможных результатов:

        @math
            \begin{array}{}
                РРРР & ОРРР & ООРР & РООО & ОООО \\
                     & РОРР & ОРОР & ОРОО & \\
                     & РРОР & ОРРО & ООРО & \\
                     & РРРО & РООР & ОООР & \\
                     &      & РОРО &      & \\
                     &      & РРОО &      &
            \end{array}

@task
    title: Невероятная семерка
    statement: |
        Найдите все трехзначные числа, сумма цифр которых равна $7$.
    solution: |
        Числа коротко записываются и хорошо друг от друга отличаются.
        Нет нужны давать им уникальные обозначения.
        Поэтому первый пункт из [правил перебора](i:brute-force-rules) автоматически выполнен.

        А вот с алгоритмом перебора сложнее.
        Если немного прикинуть, подобрать пару таких чисел, то быстро становится понятно, что их много.
        Значит нужно выписывать так, чтобы было удобно получать следующее число, и в то же время не допустить пропусков или повторений.

        Разделим все трехзначные числа на $7$ столбиков.
        Первый столбик состоит из чисел, которые начинаются на цифру $7$.
        Такое число только одно:

        $$ 700 $$

        Во втором столбце все числа, которые начинаются с цифры $6$.
        При этом оставшиеся две цифры в сумме должны дать $1$, чтобы $6 + 1 = 7$.

        @math
            \begin{matrix}
                700 & 601
                \\
                & 610
            \end{matrix}

        Обратите внимание, что при движении вниз по столбцу (из $601$ в $610$) вторая цифра увеличивается на единицу ($0$ в $1$), а третья уменьшается ($1$ в $0$).
        Продолжаем строить столбцы по такой же схеме:

        @math
            \begin{matrix}
            700 & 601 & 502 & 403 & 304 & 205 & 106
            \\
                & 610 & 511 & 412 & 313 & 214 & 115
            \\
                &     & 520 & 421 & 322 & 223 & 124
            \\
                &     &     & 430 & 331 & 232 & 133
            \\
                &     &     &     & 340 & 241 & 142
            \\
                &     &     &     &     & 250 & 151
            \\
                &     &     &     &     &     & 160
            \end{matrix}

        Всего мы нашли $34$ трехзначных числа, сумма цифр которых равна $7$.
    answer: |
        Всего $34$ числа:

        @math
            \begin{matrix}
                700 & 601 & 502 & 403 & 304 & 205 & 106
                \\
                    & 610 & 511 & 412 & 313 & 214 & 115
                \\
                    &     & 520 & 421 & 322 & 223 & 124
                \\
                    &     &     & 430 & 331 & 232 & 133
                \\
                    &     &     &     & 340 & 241 & 142
                \\
                    &     &     &     &     & 250 & 151
                \\
                    &     &     &     &     &     & 160
            \end{matrix}

@task
    title: Великий стратег
    statement: |
        В компьютерной стратегии игровая карта разбита на сетку из регионов размером $3 \times 3$.
        В начале игры под контроль игрока выдаются три случайных региона.
        Сколько всего есть различных сценариев начала игры?
    hint: |
        Нарисуйте таблицу, фиксируйте по два региона под контролем игрока и считайте количество способов выбрать третий регион.
    solution: |
        Итак, имеем таблицу регионов размерами $3 \times 3$.
        Подконтрольные игроку регионы будем обозначать $x$.
        Первое [правило](^bf-rules) перебора выполнено.

        Начнем с варианта, когда под контролем игрока оказываются первые два региона:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                x & x & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Осталось выбрать еще один регион для игрока среди пустых ячеек таблицы.
        При таком стартовом расположении есть $7$ вариантов указать третий регион игрока.

        Второй $x$ смещаем на клетку вправо, а его предыдущее местоположение отмечаем точкой "$\cdot$":

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                x & \cdot & x \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Получаем всего $6$ варинатов указать третий регион для игрока.
        Поставить третий $x$ вместо точки нельзя, ведь тогда мы получим один из уже рассмотреных ранее семи вариантов.

        Смещаем второй $x$ еще дальше, не забывая точкой отметить его предыдущее положение:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                x & \cdot & \cdot \\ \hline
                x & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Теперь осталось всего $5$ вариантов указать третий регион.
        Продолжая в том же духе можем найти все варианты начала игры, когда в левом верхнем углу таблицы стоит $x$:

        $$ 7 + 6 + 5 + 4 + 3 + 2 + 1 = 28 $$

        ---

        Мы перебрали все возможные варианты старта игры, когда в первой ячейке таблицы находится $x$.
        Теперь смещаем вправо уже этот самый **первый** $x$:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & x \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        В этом случае тоже получаем цепочку из сложений, но с началом уже с $6$, а не с $7$:

        $$ 6 + 5 + 4 + 3 + 2 + 1 = 21 $$

        Повторяем ту же самую стратегию с постепенным смещением второго $x$:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & \cdot \\ \hline
                x & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}
            
            \qquad

            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & \cdot \\ \hline
                \cdot & x & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

            \qquad

            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & \cdot \\ \hline
                \cdot & \cdot & x \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Итак, каждое смещение **первого** $x$ уменьшает цепочку из сложений.
        Осталось только посчитать, сколько же всего есть различных сценариев начала игры:

        @math
            \begin{align*}
            7 + 6 + 5 + 4 + 3 + 2 + 1 &= 28 \\
            6 + 5 + 4 + 3 + 2 + 1 &= 21 \\
            5 + 4 + 3 + 2 + 1 &= 15 \\
            4 + 3 + 2 + 1 &= 10 \\
            3 + 2 + 1 &= 6 \\
            2 + 1 &= 3 \\
            1 &= 1 \\
            \end{align*}

        $$ 28 + 21 + 15 + 10 + 6 + 3 + 1 = \textbf{84} $$
    answer: $84$

@task
    title: Цифровой хоровод
    statement: |
        Можно ли выписать девять чисел $1, 2, \ldots, 9$ по кругу так, чтобы сумма никаких двух соседних чисел не делилась ни на $3$, ни на $5$, ни на $7$?
    hint: |
        Используйте дерево вариантов.
        На одном листе рисуйте дерево, на других листах проводите вычисления и проверки на деление.
    solution: |
        Решать эту задачу мы будем через построение дерева вариантов.
        Так как числа выписаны по кругу, то нет никакой разницы, с какого числа начинать.
        Начнем с числа $3$.
        Найдем всех подходящих ему соседей:

        @math
            \begin{array}{r}
                \textbf{3} \ + & 1 & 2 & 4 & 5 & 6 & 7 & 8 & 9 \\
                =     & 4 & 5 & 7 & 8 & 9 & 10 & 11 & 12 \\
                      & + & - & - & + & - & - & + & -
            \end{array}

        Рядом с цифрой $3$ можно поставить цифры $1, 5$ и $8$.
        Отображаем эти данные на дереве:

        @image
            src: assets/practicum/numbers-circle-tree-step-1.svg
            width: 200px
            invertible: true

        Можно выбрать любую ветку для продолжения.
        Для простоты будем всегда выбирать ветку с наименьшим числом.
        В данном случае это ветка с цифрой $1$.
        Ищем всех соседей для цифры $1$, не забывая, что цифру $3$ мы уже использовали:

        @math
            \begin{array}{r}
                3, \ \textbf{1} \ + & 2 & 4 & 5 & 6 & 7 & 8 & 9 \\
                =          & 3 & 5 & 6 & 7 & 8 & 9 & 10 \\
                           & - & - & - & - & + & - & -
            \end{array}

        Итак, продолжить ветку с цифрой $1$ можем только веткой с цифрой $7$.
        Рисуем ее на дереве:

        @image
            src: assets/practicum/numbers-circle-tree-step-2.svg
            width: 250px
            invertible: true

        Ну и так далее. Ищем соседей, рисуем ветки, выбираем наименьшую, ищем соседей, рисуем ветки...
        Некоторые ветки будет невозможно продолжить.
        Тогда откатываемся и продолжаем с предыдущими вариантами.

        У меня получилось вот такое дерево:

        @image
            src: assets/practicum/numbers-circle-tree-full.svg
            width: 500px
            invertible: true

        Не забываем проверить, чтобы сумма последнего числа (у меня это $8$) с самым первым (у меня это $3$) тоже удовлетворяла условию задачи, ведь цифры на самом деле записываются по кругу, так что $3$ и $8$ это тоже соседи!
        
        Выписываем подряд все цифры в получившейся финальной ветке и получаем ответ к задаче:

        $$ 3, 1, 7, 4, 9, 2, 6, 5, 8 $$

    answer: |
        Выписать числа таким образом можно. Пример:

        $$ 3, 1, 7, 4, 9, 2, 6, 5, 8 $$

@task
    title: Ставки на спорт!
    statement: |
        В соревнованиях по хоккею участвовали пять команд: $A, B, C, D, E$.
        В конкурсе знатоков один участник предположил, что они займут места в порядке $A, B, C, D, E$, а другой предсказал порядок $D, A, E, C, B$.
        
        После окончания соревнований оказалось, что первый не угадал не только место хотя бы одной из команд, но даже какую-либо пару следующих друг за другом команд.
        Второй же угадал места двух команд и две пары следующих друг за другом команд.
        В каком порядке расположитилсь команды?
    hint: |
        Как основу для перебора используйте тот факт, что второй знаток правильно угадал "две пары следующих друг за другом команд".
    solution: |
        Из условия нам известно, что второй знаток правильно угадал "две пары следующих друг за другом команд".
        Обозначим первую пару команд за $XY$, а вторую за $NM$.
        Всего существует $3$ "шаблона" расположить эти команды:

        $$ 1) \ XY|NM|? \qquad 2) \ ?|XY|NM \qquad 3) \ XY|?|NM $$

        Вместо знаков вопроса стоит буква еще одной недостающей команды.
        Разберемся с первым шаблоном.
        По условию в этом шаблоне мы можем использовать только следующие пары команд: $ DA, \ AE, \ EC, \ CB $.
        Подставляем их **по очереди** и проверяем, подходят ли получившиеся комбинации под оба условия.

        $$ DA|EC|B \quad - \\ DA|CB|E \quad - \\ AE|CB|D \quad - \\ EC|DA|B \quad - \\ CB|DA|E \quad - \\ CB|AE|D \quad - $$

        Ни одна комбинация не удовлетворяет двум условиям.
        Пробуем второй шаблон:

        $$ B|DA|EC \quad - \\ E|DA|CB \quad + $$

        Последняя комбинация удовлетворяет обоим условиям.
        Итак, команды расположились в следующем порядке:

        $$ EDACB $$
    answer: |
        $ EDACB $

@task
    title: Пятибуквенный словарь
    tags:
        - ЕГЭ Информатика
    statement: |
        Василий составил список всех $5$-буквенных слов, которые можно составить из букв "А", "Б", "В".
        Буквы записываются в алфавитном порядке.
        Вот начало списка:

        1. ААААА
        2. ААААБ
        3. ААААВ
        4. АААБА
        5. АААББ

        Запишите слово, которое стоит на $150$-м месте в этом списке.
    hint: |
        Посчитайте, сколько раз поменяется пятая буква на пути к $150$-му слову.
        Для определения букв используйте остатки от деления на $3$.
    solution: |
        В этой задаче Василий придумал алгоритм перебора слов и тем самым выполнил [второе правило](^bf-rules) перебора.
        Так он смог получить список из всех слов.
        Нам же нужно детально разобрать этот алгоритм и найти способ нахождения конкретного слова по его номеру в списке.


        Обратите внимание на последнюю, $5$-ю букву.
        Она постоянно меняется.
        В списке из $150$ слов последняя буква изменилась $149$ раз, на единицу меньше, чем количество слов, ведь первое слово уже было дано и никак не изменялось:

        @math
            \begin{array}{}
                \overbrace{\text{ААААА}}^{Слово \ 1} & & \overbrace{\text{ААААБ}}^{Слово \ 2} & \cdots & \overbrace{\text{?????}}^{Слово \ 149} & & \overbrace{\text{?????}}^{Слово \ 150} \\
                & \underbrace{\text{A} \Rightarrow \text{Б}}_{\text{Замена 1}} & & \underbrace{\text{Б} \Rightarrow \text{В}}_{\text{Замена 2}} & \dots & \underbrace{\text{?} \Rightarrow \text{?}}_{\text{Замена 149}} &
            \end{array}

        Если мы начинаем с буквы "A", то какая же буква будет после $149$ замен?
        Для удобства построим таблицу:

        @math
            \begin{array}{r|ccc|ccc|c|}
                \text{Буква} & \text{А} & \text{Б} & \text{В} & \text{А} & \text{Б} & \text{В} & \cdots & ? \\
                \text{Замена} & 0 & 1 & 2 & 3 & 4 & 5 & \cdots & 149
            \end{array}

        Замечаем, что номера замены с буквой "А" делятся нацело на $3$: $0/3, 3/3, \ldots$<br>
        Номера замены с буквой "Б" при делении на $3$ дают остаток $1$: $1/3, 4/3, \ldots$<br>
        Наконец, номера замены с буквой "В" при делении на $3$ дают остаток $2$: $2/3, 5/3, \ldots$<br>

        Теперь мы можем узнать, что будет после $149$ замен.
        Делим $149$ на $3$ и получаем остаток $2$.
        Мы уже выяснили, что остаток $2$ связан с буквой "В".
        Значит, после $149$ замен буква "A" станет буквой "В".

        @math
            \begin{array}{r|ccc|ccc|c|}
                \text{Буква} & \text{А} & \text{Б} & \text{В} & \text{А} & \text{Б} & \text{В} & \cdots & \text{В} \\
                \text{Замена} & 0 & 1 & 2 & 3 & 4 & 5 & \cdots & 149 \\
                \text{Остаток} & 0 & 1 & 2 & 0 & 1 & 2 & \cdots & 2
            \end{array}

        Итак, у слова на $150$-м месте в списке последняя буква это "В":

        $$ \boxed{ ? \ ? \ ? \ ? \ \text{В} } $$

        Четвертая буква в слове меняется после каждых $3$-х изменений пятой буквы.
        Всего пятая буква изменилась $149$ раз, значит четвертая буква изменилась $149 : 3 = 49.(6)$, то есть $49$ целых раз.
        
        Раз произошло $49$ замен четвертой буквы, то, прямо как и с пятой буквой, мы можем $49$ поделить на $3$ и остаток от деления укажет на нужную букву.
        $49 = 16 \cdot 3 + 1$, то есть остаток равен $1$. А остаток $1$ связан с буквой $Б$.

        Итак, у слова на $150$-м месте в списке четвертая буква это "Б":

        $$ \boxed{ ? \ ? \ ? \ \text{Б} \ \text{В} } $$

        Точно такие же рассуждения проводим для третьей буквы.
        Она меняется после $3$-х изменений четвертой буквы, но и сама четвертая меняется после $3$-х изменений пятой буквы.
        Стало быть, третья буква меняется после каждых $3\cdot 3 = 9$ изменений пятой буквы.

        $149 : 9 = 16.(5)$, то есть $16$ раз поменялась третья буква. $16 = 3 \cdot 5 + 1$, остаток равен $1$.
        Итак, у слова на $150$-м месте в списке третья буква это тоже "Б":

        $$ \boxed{ ? \ ? \ \text{Б} \ \text{Б} \ \text{В} } $$

        Вторая буква меняется после каждых $3\cdot 3\cdot 3 = 27$ изменений пятой буквы.
        $149 : 27 = 5.(518)$, то есть $5$ раз поменялась вторая буква. $5 = 3 \cdot 1 + 2$, остаток равен $2$, что означает букву "В":

        $$ \boxed{ ? \ \text{В} \ \text{Б} \ \text{Б} \ \text{В} } $$

        Первая буква меняется после каждого $3\cdot 3\cdot 3\cdot 3 = 81$ изменения пятой буквы.
        $149 : 81 = 1.8\ldots$, то есть всего $1$ раз изменилась буква. С "А" на "Б".

        $$ \boxed{ \text{Б} \ \text{В} \ \text{Б} \ \text{Б} \ \text{В} } $$
    answer: |
        На $150$-м месте в списке стоит слово "БВББВ".

@task
    title: Обратный словарь
    statement: |
        Алина составила список всех $4$-буквенных слов, которые можно составить из букв "А", "Б", "В", "Г".
        Буквы записываются в алфавитном порядке. Вот начало списка:

        1. АААА
        2. АААБ
        3. АААВ
        4. АААГ
        5. АААБ

        На каком месте в этом списке стоит слово "ГБАВ"?
    hint: |
        Посчитайте, сколько раз должна измениться последняя (четвертая) буква, чтобы получилось слово "ГБАВ".
    solution: |
        Раз самая первая буква в данном нам слове это "Г", значит до нее уже были использованы "А", "Б" и "В".
        Другими словами, первая буква изменилась $3$ раза:

        1. "А" на "Б"
        2. "Б" на "В"
        3. "В" на "Г"

        Первая буква меняется только после четырех изменений второй буквы.
        Вторая буква меняется после четырех изменений третьей буквы, которая и сама меняется после четырех изменений уже четвертой буквы.
        Короче, первая буква в слове меняется после $4 \cdot 4 \cdot 4 = 64$ изменений четвертвой буквы.

        В нашем случае первая буква изменилась три раза, поэтому "Г" мы получим только после $3 \cdot 64 = 192$ изменений последней буквы в слове.

        Вторая буква у нас это "Б".
        Она получается одним изменением с "А" на "Б".
        Но чтобы изменилась вторая буква, последняя буква должна поменяться $4 \cdot 4 = 16$ раз.

        Выходит, чтобы слово начиналось с букв "ГБ" последняя буква должна поменяться $192 + 16 = 208$ раз.

        Третья буква "A". Изменений нет, поэтому для нее требуются все те же $208$ изменений последней буквы.
        Ну а последняя буква "В" получется через два изменения:

        $$ \underbrace{192}_{\text{Г}} + \underbrace{16}_{\text{Б}} + \underbrace{0}_{\text{А}} + \underbrace{2}_{\text{В}} = 210 $$

        Итого, $210$ раз должна поменяться последняя буква, чтобы получилось слово "ГБАВ".
        Но последняя буква меняется постоянно, а значит ее изменения напрямую связаны с местом в списке.
        После $210$ изменения мы получим $211$ слово в списке:

        @math
            \begin{array}{}
                \overbrace{\text{АААА}}^{Слово \ 1} & & \overbrace{\text{АААБ}}^{Слово \ 2} & \cdots & \overbrace{\text{ГБАБ}}^{Слово \ 210} & & \overbrace{\text{ГБАВ}}^{Слово \ 211} \\
                & \underbrace{\text{A} \Rightarrow \text{Б}}_{\text{Замена 1}} & & \underbrace{\text{Б} \Rightarrow \text{В}}_{\text{Замена 2}} & \dots & \underbrace{\text{Б} \Rightarrow \text{В}}_{\text{Замена 210}} &
            \end{array}

        Слово "ГБАВ" стоит на $211$ месте в списке.
    answer: |
        Слово "ГБАВ" стоит на $211$ месте в списке.

@todo
    * Задачи на падение двух кубиков
    * Задача на нахождение всех латинских квадратов 3-го порядка
    * Задачи из "[Перебор вариантов](@direct|https://mathus.ru/math/kombinatorika.pdf)"