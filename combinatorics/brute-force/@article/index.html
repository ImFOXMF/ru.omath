<!DOCTYPE html><!--


███████╗██████╗ ██╗   ██╗██████╗ ██╗████████╗
██╔════╝██╔══██╗██║   ██║██╔══██╗██║╚══██╔══╝
█████╗  ██████╔╝██║   ██║██║  ██║██║   ██║   
██╔══╝  ██╔══██╗██║   ██║██║  ██║██║   ██║   
███████╗██║  ██║╚██████╔╝██████╔╝██║   ██║   
╚══════╝╚═╝  ╚═╝ ╚═════╝ ╚═════╝ ╚═╝   ╚═╝


--><html lang="ru" data-layout="topic" data-topic="combinatorics/brute-force"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Erudit 1.2.0"><meta name="build-time" content="1698135931548"><title>Прямой перебор | Статья | Комбинаторика на OMath</title><meta name="description" content="Простой, безотказный и в то же время самый медленный способ решать задачи. Но если до него все же дошло дело, надо уметь перебирать комбинации так, чтобы не запутаться."><meta name="keywords" content="перебор вариантов, полный перебор, прямой перебор, дерево вариантов, древо вариантов"><meta property="og:site_name" content="Открытая математика"><meta property="og:title" content="Прямой перебор | Статья | Комбинаторика на OMath"><meta property="og:description" content="Простой, безотказный и в то же время самый медленный способ решать задачи. Но если до него все же дошло дело, надо уметь перебирать комбинации так, чтобы не запутаться."><meta property="og:image" content="https://omath.ru/combinatorics/brute-force/@topic/ogImage.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="537"><meta property="og:image" content="https://omath.ru/site/graphics/ogImage.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="300"><meta property="og:image:height" content="300"><meta property="og:image:alt" content="OMath logo"><link rel="icon" href="/site/graphics/favicons/favicon.svg"><link rel="icon" type="image/png" href="/site/graphics/favicons/favicon.png"><!-- Translator--><link rel="stylesheet" href="/site/content/style.css"><link rel="stylesheet" href="/site/content/assets/icons/style.css"><script src="/site/content/script.js"></script><script>globalThis.TaskGenUrl = '/site/content/worker_taskGen.js';
</script><!-- PhotoSwipe--><link rel="stylesheet" href="/site/content/assets/vendor/photoswipe/photoswipe.css"><link rel="stylesheet" href="/site/content/assets/vendor/photoswipe/photoswipe-dynamic-caption-plugin.css"><script src="/site/content/assets/vendor/photoswipe/photoswipe.umd.min.js"></script><script src="/site/content/assets/vendor/photoswipe/photoswipe-lightbox.umd.min.js"></script><script src="/site/content/assets/vendor/photoswipe/photoswipe-dynamic-caption-plugin.umd.min.js"></script><script>var PhotoSwipeLang = {
    closeTitle:         'Закрыть',
    zoomTitle:          'Масштаб',
    arrowPrevTitle:     'Назад',
    arrowNextTitle:     'Дальше',
    errorMsg:           'Не получилось загрузить изображение!'
}
</script><!-- KaTeX--><link rel="stylesheet" href="/site/content/assets/vendor/katex/katex.min.css"><!-- Icons--><link rel="stylesheet" href="/site/fonts/icons/style.css"><!-- Global Style--><link href="/site/styles/global.css" rel="stylesheet"><!-- Global Script--><script src="/site/scripts/global.js"></script><!-- Page Style--><link href="/site/styles/pages/topic.css" rel="stylesheet"><!-- Page Script--><script src="/site/scripts/pages/topic.js"></script><!-- Ads--><script>window.yaContextCb=window.yaContextCb||[]</script><script src="https://yandex.ru/ads/system/context.js" async=""></script></head><body><script>OMath.setTheme = (theme) =>
{
    let actualTheme = theme;

    if (actualTheme === 'auto')
    {
        let preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches === true;
        let preferTheme = preferDark ? 'dark' : 'light';

        actualTheme = preferTheme;
    }

    document.documentElement.dataset.theme = theme === 'auto' ? theme + '-' + actualTheme : actualTheme;
    document.querySelector('meta[name="color-scheme"]').setAttribute('content', actualTheme);
    localStorage.setItem('theme', theme);
}

OMath.cycleTheme = () =>
{
    let themes = ['auto', 'light', 'dark'];
    let theme = localStorage.getItem('theme');

    let currentIndex = themes.indexOf(theme);
    if (currentIndex === -1)
        currentIndex++;

    if (currentIndex < themes.length - 1)
        currentIndex++;
    else
        currentIndex = 0;

    OMath.setTheme(themes[currentIndex]);
}

(() =>
{
    let OMath = window.OMath;

    let tag = document.createElement('meta');
        tag.setAttribute('name', 'color-scheme');
        tag.setAttribute('content', '');
    
    document.head.appendChild(tag);

    let updateTheme = () =>
    {
        let theme = localStorage.getItem('theme');

        if (theme === null || theme === 'null')
            theme = 'auto';
    
        OMath.setTheme(theme);
    }

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => updateTheme());
    updateTheme();
})();</script><aside class="major" data-pane="toc"><div class="full"><div class="siteInfo"><a class="logo" href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 136 136">
    <defs>
        <linearGradient id="logotype-gradient">
            <stop offset="0%" stop-color="#0aa2f4" />
            <stop offset="100%" stop-color="#1976d7" />
        </linearGradient>
    </defs>
    <circle cx="68" cy="68" r="67.5" fill="url(#logotype-gradient)" />
    <path class="cut" d="M68.4.5C40.3 10 20 36.6 20 68s20.3 58 48.4 67.5c28.2-9.5 48.4-36.1 48.4-67.5S96.6 10 68.4.5zm30.4 92.9c-.1.2-.4.4-.8.5-.4.1-.9.2-1.6.3-.6.1-1.5.1-2.5.1s-1.8 0-2.4-.1c-.6-.1-1.2-.2-1.5-.3-.4-.1-.6-.3-.8-.5-.2-.2-.2-.5-.2-.7V49.9h-.1L73.6 92.6c-.1.4-.3.6-.5.9-.2.2-.6.4-1 .5-.4.1-1 .2-1.6.3-.6 0-1.4.1-2.4.1-.9 0-1.7 0-2.4-.1-.6-.1-1.2-.2-1.6-.3-.4-.1-.8-.3-1-.5-.2-.2-.4-.5-.5-.8L48 49.9h-.1v42.7c0 .3-.1.5-.2.7-.1.2-.4.4-.8.5-.4.1-.9.2-1.6.3-.6.1-1.5.1-2.5.1s-1.8 0-2.4-.1c-.6-.1-1.2-.2-1.6-.3-.4-.1-.7-.3-.8-.5-.1-.2-.2-.5-.2-.7V45.9c0-1.4.4-2.4 1.1-3.2.7-.7 1.7-1.1 2.9-1.1h7c1.2 0 2.3.1 3.2.3.9.2 1.7.5 2.3 1 .6.5 1.2 1.1 1.6 1.9.4.8.8 1.7 1.1 2.9L68.4 79h.2l11.8-31.2c.4-1.1.7-2.1 1.2-2.9.4-.8.9-1.4 1.5-1.9s1.2-.8 2-1c.8-.2 1.6-.3 2.6-.3h7.2c.7 0 1.4.1 1.9.3.5.2 1 .5 1.3.8.3.4.6.8.8 1.3.2.5.3 1.1.3 1.8v46.8c-.2.2-.3.5-.4.7z"/>
</svg></a><div class="title"><a href="/">Математика</a></div><div class="slogan">Понятно и подробно</div></div><div class="paneSwitcher"><div class="inner"><button title="Оглавление" data-target="toc"><div class="inner"><i class="i-sitemap"></i></div></button><button title="Страницы" data-target="pages"><div class="inner"><i class="i-file-lines"></i></div></button><button title="Поиск" data-target="search"><div class="inner"><i class="i-magnifying-glass"></i></div></button><button title="Язык" data-target="language"><div class="inner"><i class="i-globe"></i></div></button><button title="Другое" data-target="other"><div class="inner"><i class="i-menu-ellipsis-ver"></i></div></button><div class="slider"></div></div></div><div class="panes"><div class="pane" data-pane="toc"><div class="inner"><div class="viewContainer" data-view="book"><div class="view" data-view="global"><div class="inner"><div class="tocTree"><div class="tocGroup"><div class="tocGroupBody"><div class="tocItem" data-id="basics"><a><span class="figure"><i class="i-book"></i></span><span class="label">Основы математики</span></a></div></div></div><div class="tocGroup"><div class="title">Базовая математика</div><div class="tocGroupBody"><div class="tocItem" data-id="lang-of-math"><a><span class="figure"><i class="i-book"></i></span><span class="label">Язык математики</span></a></div><div class="tocItem" data-id="base-logic"><a><span class="figure"><i class="i-book"></i></span><span class="label">Основы логики</span></a></div><div class="tocItem" data-id="algebra"><a><span class="figure"><i class="i-book"></i></span><span class="label">Алгебра</span></a></div><div class="tocItem" data-current data-id="combinatorics"><a><span class="figure"><i class="i-book"></i></span><span class="label">Комбинаторика</span></a></div></div></div><div class="tocGroup"><div class="title">Экзамены</div><div class="tocGroupBody"><div class="tocItem" data-id="exam/common"><a><span class="figure"><i class="i-book"></i></span><span class="label">Общее по эказменам</span></a></div><div class="tocItem" data-id="exam/oge"><a><span class="figure"><i class="i-book"></i></span><span class="label">ОГЭ</span></a></div><div class="tocItem" data-id="exam/ege-base"><a><span class="figure"><i class="i-book"></i></span><span class="label">ЕГЭ. База</span></a></div><div class="tocItem" data-id="exam/ege"><a><span class="figure"><i class="i-book"></i></span><span class="label">ЕГЭ. Профиль</span></a></div></div></div><div class="tocGroup"><div class="tocGroupBody"><div class="tocItem" data-id="other"><a><span class="figure"><i class="i-book"></i></span><span class="label">Занимательное</span></a></div></div></div></div></div></div><div class="view loading" data-view="loading"><i class="i-omath"></i></div><div class="view" data-view="book"><div class="inner"><div class="bookTitle">Комбинаторика</div><div class="controls"><div class="navButtons"><div class="back" title="Назад"><i class="i-arrow-left"></i></div><a class="home" title="Об учебнике" href="/combinatorics/@book"><i class="i-house"></i></a></div><div class="filter"><div class="label">Показать:</div><div class="buttons"><div class="article" title="Статья" data-active><i class="i-file-lines"></i></div><div class="summary" title="Конспект"><i class="i-topic-summary"></i></div><div class="practicum" title="Практикум" data-active><i class="i-topic-practicum"></i></div></div></div></div><div class="bookToc" data-book-id="combinatorics" data-current=""><div class="tocTree"><div class="tocGroup"><div class="title">Основы</div><div class="tocGroupBody"><div class="tocItem" data-id="combinatorics/preface"><a href="https://omath.ru/combinatorics/preface/@article"><span class="figure"><i class="i-topic-many"></i></span><span class="label">Что такое комбинаторика?</span></a></div><div class="tocItem" data-id="combinatorics/brute-force"><a href="https://omath.ru/combinatorics/brute-force/@article"><span class="figure"><i class="i-topic-many"></i></span><span class="label">Прямой перебор</span></a></div><div class="tocSection"><div class="tocItem"><a><span class="figure"><i class="i-folder-open"></i></span><span class="label">Основные правила</span></a></div><div class="tocSectionBody"><div class="tocItem tocLevel-1" data-id="combinatorics/rules/sum"><a href="https://omath.ru/combinatorics/rules/sum/@article"><span class="figure"><i class="i-topic-many"></i></span><span class="label">Правило сложения</span></a></div><div class="tocItem tocLevel-1" data-id="combinatorics/rules/product"><a href="https://omath.ru/combinatorics/rules/product/@article"><span class="figure"><i class="i-topic-many"></i></span><span class="label">Правило умножения</span></a></div></div></div></div></div></div></div></div></div></div></div></div><div class="pane" data-pane="pages"><div class="inner"><div class="listItems"><a class="listSimpleItem" data-page="home" href="/"><div class="figure"><i class="i-house"></i></div><div class="label">Главная</div></a><a class="listSimpleItem" data-page="hq" href="/contributors/"><div class="figure"><i class="i-building"></i></div><div class="label">Центр развития</div></a></div></div></div><div class="pane" data-pane="search"><div class="inner"></div></div><div class="pane" data-pane="language"><div class="inner"></div></div><div class="pane" data-pane="other"><div class="inner"><div class="listItems"><a class="listSimpleItem src" href="https://github.com/open-math" target="_blank"><div class="figure"><i class="i-code"></i></div><div class="label">Исходный код</div></a><a class="listSimpleItem editor" href="https://editor.omath.net" target="_blank"><div class="figure"><i class="i-pen-nib"></i></div><div class="label">Редактор</div></a><a class="listSimpleItem vk" href="https://vk.com/omath" target="_blank"><div class="figure"><i class="i-vk"></i></div><div class="label">Группа ВКонтакте</div></a><a class="listSimpleItem tg" href="https://t.me/omath_official" target="_blank"><div class="figure"><i class="i-telegram"></i></div><div class="label">Telegram канал</div></a><a class="listSimpleItem donate" href="https://boosty.to/" target="_blank"><div class="figure"><i class="i-donate"></i></div><div class="label">Поддержать проект</div></a><button class="listSimpleItem" id="themeSwitcher" onclick="OMath.cycleTheme()"><div class="figure themeIcon"><i class="i-sun"></i><i class="i-moon"></i><i class="i-sun-and-moon"></i></div><div class="label">Тема:</div><div class="themeName"><div class="auto">Авто</div><div class="light">Светлая</div><div class="dark">Темная</div></div></button></div></div></div></div><!--+adBlock('R-A-2185026-3', 'left')--></div><div class="mini"><a href="/" title="На главную"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 136 136">
    <defs>
        <linearGradient id="logotype-gradient">
            <stop offset="0%" stop-color="#0aa2f4" />
            <stop offset="100%" stop-color="#1976d7" />
        </linearGradient>
    </defs>
    <circle cx="68" cy="68" r="67.5" fill="url(#logotype-gradient)" />
    <path class="cut" d="M68.4.5C40.3 10 20 36.6 20 68s20.3 58 48.4 67.5c28.2-9.5 48.4-36.1 48.4-67.5S96.6 10 68.4.5zm30.4 92.9c-.1.2-.4.4-.8.5-.4.1-.9.2-1.6.3-.6.1-1.5.1-2.5.1s-1.8 0-2.4-.1c-.6-.1-1.2-.2-1.5-.3-.4-.1-.6-.3-.8-.5-.2-.2-.2-.5-.2-.7V49.9h-.1L73.6 92.6c-.1.4-.3.6-.5.9-.2.2-.6.4-1 .5-.4.1-1 .2-1.6.3-.6 0-1.4.1-2.4.1-.9 0-1.7 0-2.4-.1-.6-.1-1.2-.2-1.6-.3-.4-.1-.8-.3-1-.5-.2-.2-.4-.5-.5-.8L48 49.9h-.1v42.7c0 .3-.1.5-.2.7-.1.2-.4.4-.8.5-.4.1-.9.2-1.6.3-.6.1-1.5.1-2.5.1s-1.8 0-2.4-.1c-.6-.1-1.2-.2-1.6-.3-.4-.1-.7-.3-.8-.5-.1-.2-.2-.5-.2-.7V45.9c0-1.4.4-2.4 1.1-3.2.7-.7 1.7-1.1 2.9-1.1h7c1.2 0 2.3.1 3.2.3.9.2 1.7.5 2.3 1 .6.5 1.2 1.1 1.6 1.9.4.8.8 1.7 1.1 2.9L68.4 79h.2l11.8-31.2c.4-1.1.7-2.1 1.2-2.9.4-.8.9-1.4 1.5-1.9s1.2-.8 2-1c.8-.2 1.6-.3 2.6-.3h7.2c.7 0 1.4.1 1.9.3.5.2 1 .5 1.3.8.3.4.6.8.8 1.3.2.5.3 1.1.3 1.8v46.8c-.2.2-.3.5-.4.7z"/>
</svg></a><button class="menu" title="Меню" data-target="toc"><i class="i-menu"></i></button><button title="Оглавление" data-target="toc"><i class="i-sitemap"></i></button><button title="Страницы" data-target="pages"><i class="i-file-lines"></i></button><button title="Поиск" data-target="search"><i class="i-magnifying-glass"></i></button><button title="Язык" data-target="language"><i class="i-globe"></i></button><button title="Другое" data-target="other"><i class="i-menu-ellipsis-ver"></i></button></div></aside><aside class="minor"><div class="full"><div class="typeSwitcher"><a href="/combinatorics/preface/@article" title="Предыдущая тема"><div class="inner"><i class="i-arrow-left"></i></div></a><a title="Статья" data-current><div class="inner"><i class="i-file-lines"></i></div></a><a href="../@summary" title="Конспект"><div class="inner"><i class="i-topic-summary"></i></div></a><a href="../@practicum" title="Практикум"><div class="inner"><i class="i-topic-practicum"></i></div></a><a href="/combinatorics/rules/sum/@article" title="Следующая тема"><div class="inner"><i class="i-arrow-right"></i></div></a></div><div class="topicToc"><div class="inner"><div class="tocTree"><div class="tocItem"><a href="#auto-heading:Zachem-eto-nuzhno"><span class="figure"><i class="i-hashtag"></i></span><span class="label">Зачем это нужно?</span></a></div><div class="tocItem"><a href="#auto-heading:Perebiraem-s-umom"><span class="figure"><i class="i-hashtag"></i></span><span class="label">Перебираем с умом</span></a></div><div class="tocItem tocLevel-1"><a href="#important:brute-force-rules"><span class="figure"><i class="i-exclamation"></i></span><span class="label">Правила перебора</span></a></div><div class="tocItem"><a href="#auto-heading:Derevo-variantov"><span class="figure"><i class="i-hashtag"></i></span><span class="label">Дерево вариантов</span></a></div><div class="tocItem tocLevel-1"><a href="#auto-heading:Postroenie-dereva"><span class="figure"><i class="i-hashtag"></i></span><span class="label">Построение дерева</span></a></div><div class="tocItem tocLevel-1"><a href="#auto-heading:Derevya-byvayut-raznymi"><span class="figure"><i class="i-hashtag"></i></span><span class="label">Деревья бывают разными</span></a></div><div class="tocItem tocLevel-1"><a href="#auto-heading:Problemy-derevev"><span class="figure"><i class="i-hashtag"></i></span><span class="label">Проблемы деревьев</span></a></div><div class="tocItem tocLevel-2"><a href="#important:use-imagination"><span class="figure"><i class="i-exclamation"></i></span><span class="label">Экспериментируйте!</span></a></div></div></div></div><div class="contributors" title="Вклад"><div class="avatars"><img src="/site/graphics/contributors/CMTV.png"><img src="/site/graphics/contributors/nagibin.png"></div></div><a class="contribute" href="/contribute-guide"><div class="figure"><i class="i-plus"></i></div><span>Внести свой вклад</span></a><div class="minorView contribution"><div class="inner"><div class="contributors"><div class="expand"></div><a class="contributor" href="/@contributor/nagibin/"><img src="/site/graphics/contributors/nagibin.png"><div class="name">Николай Нагибин</div></a><a class="contributor" href="/@contributor/CMTV/"><img src="/site/graphics/contributors/CMTV.png"><div class="name">Петр Радько</div></a></div><div class="info"><span class="title">Вклад:</span><span class="number">2</span><i class="i-xmark close"></i></div></div></div></div><div class="mini"><a title="Статья" data-current><i class="i-file-lines"></i></a><a href="../@summary" title="Конспект"><i class="i-topic-summary"></i></a><a href="../@practicum" title="Практикум"><i class="i-topic-practicum"></i></a></div></aside><main><article><header><img class="decoration" src="/combinatorics/@book/decoration.svg"><div class="topicInfo"><div class="type" title="Статья"><i class="i-file-lines"></i></div><h1 class="title">Прямой перебор</h1><div class="desc">Простой, безотказный и в то же время самый медленный способ решать задачи. Но если до него все же дошло дело, надо уметь перебирать комбинации так, чтобы не запутаться.</div></div><div class="ads beforeContent"><div id="yandex_rtb_R-A-2185026-2"></div><script>window.yaContextCb.push(()=>{
    Ya.Context.AdvManager.render({
        renderTo: 'yandex_rtb_R-A-2185026-2',
        blockId: 'R-A-2185026-2'
    })
})</script></div></header><div data-content><h2 id="auto-heading:Zachem-eto-nuzhno">Зачем это нужно?<a class="hAnchor" href="#auto-heading:Zachem-eto-nuzhno" title="Ссылка на этот раздел"><i class="ic-link"></i></a></h2><p>Очень многие комбинаторные задачи можно решить просто вручную составив все возможные комбинации.</p><ul><li><div class="liContent"><p>Зачем вообще проходить эту тему?</p></div></li><li><div class="liContent"><p>Перебрать варианты любой ведь сможет!</p></div></li><li><div class="liContent"><p>Мы ведь и зашли в этот учебник, чтобы изучать приемы быстрого решения!</p></div></li></ul><p>Эти и подобные вопросы и возмущения понятны.
Но прежде чем научиться летать, нужно сначала научиться ползать.
Прежде чем узнать о хитрых приемах, надо сначала изучить и отработать базу — перебор вариантов вручную.</p><p>Не волнуйтесь, у прямого перебора вариантов тоже есть свои хитрые приемы и весьма интересные задачи.
Скучно не будет.</p><h2 id="auto-heading:Perebiraem-s-umom">Перебираем с умом<a class="hAnchor" href="#auto-heading:Perebiraem-s-umom" title="Ссылка на этот раздел"><i class="ic-link"></i></a></h2><p>Казалось бы, что может быть проще!?
Просто берешь и выписываешь все возможные комбинации!
Как-бы да, но при бездумном и бессистемном выписывании очень легко можно пропустить какую-то комбинацию.
Или посчитать одну и ту же дважды.
Чтобы такого не проиходило, нужно придерживаться двух простых правил:</p><div class="accentBlock" id="important:brute-force-rules" data-type="important"><div class="side"><div class="type" title="Важно"><i></i></div></div><div class="base"><div class="main"><section><div class="title">Правила перебора</div><div class="content" data-content=""><ol start="1"><li><div class="liContent"><p>Каждому элементу дать уникальное и короткое обозначение.</p></div></li><li><div class="liContent"><p>Придумать удобный алгоритм перебора и строго ему следовать.</p></div></li></ol></div></section></div></div></div><p>Уникальные обозначения элементам нужно давать, чтобы не держать в голове сложные сущности. Превратить их в что-то простое — буквы или символы.
Именно так сущности вроде «яблок» и «апельсинов» и «бананов» во время решения задачи превращаются в обезличенные буквы «я», «а» и «б».</p><p>Алгоритм перебора помогает не запутаться, не пропустить комбинации и не посчитать лишние.
При правильном выборе алгоритма решение задачи на перебор из пытки превращается вы повторение четких действий, которое неизбежно приведет к правильным результатам.</p><p>На словах правила звучат довольно просто.
Теперь научимся применять их для решения задач.
Начнем с чего-нибудь простого:</p><div class="accentBlock" id="example:wonderful-day" data-type="example"><div class="side"><div class="type" title="Пример"><i></i></div><div class="expand" title="Решение"><div class="bgOverlay"></div><i class="ic-chevron-up"></i></div></div><div class="base"><div class="main"><section><div class="title">Насыщенный день</div><div class="content" data-content=""><p>Петр должен убраться в комнате, сделать домашнее задание и поработать над личным проектом.
Сделать нужно все, но Петр еще не решил, в какой последовательности.
Сколькими способами он может выбрать эту последовательность?</p></div></section></div><div class="expand"><section><div class="title">Решение</div><div class="content" data-content=""><p>Обозначим уборку в комнате буквой «У», домашнее задание буквой «Д», а работу над личным проектом буквой «П».
Введя эти обозначения мы выполнили первый пункт <a class="link" href="/combinatorics/brute-force/@article/#important:brute-force-rules" data-preview="@article|combinatorics/brute-force|important:brute-force-rules">правил перебора</a>.</p><p>Перебирать будем так: сначала разберем варианты, когда буква «У» стоит первой, потом второй, затем последней.
Введя такой порядок мы выполнили второй пункт правил перебора.
Приступаем:</p><div class="mathDisplay"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">У</mi><mtext>ДП</mtext><mspace width="1em"/><mi mathvariant="bold">У</mi><mtext>ПД</mtext><mspace linebreak="newline"></mspace><mtext>Д</mtext><mi mathvariant="bold">У</mi><mtext>П</mtext><mspace width="1em"/><mtext>П</mtext><mi mathvariant="bold">У</mi><mtext>Д</mtext><mspace linebreak="newline"></mspace><mtext>ДП</mtext><mi mathvariant="bold">У</mi><mspace width="1em"/><mtext>ПД</mtext><mi mathvariant="bold">У</mi></mrow><annotation encoding="application/x-tex">    \bm{У}\text{ДП} \quad \bm{У}\text{ПД}
    \\
    \text{Д}\bm{У}\text{П} \quad \text{П}\bm{У}\text{Д}
    \\
    \text{ДП}\bm{У} \quad \text{ПД}\bm{У}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathbf cyrillic_fallback">У</span></span></span><span class="mord text"><span class="mord cyrillic_fallback">ДП</span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord"><span class="mord"><span class="mord mathbf cyrillic_fallback">У</span></span></span><span class="mord text"><span class="mord cyrillic_fallback">ПД</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord cyrillic_fallback">Д</span></span><span class="mord"><span class="mord"><span class="mord mathbf cyrillic_fallback">У</span></span></span><span class="mord text"><span class="mord cyrillic_fallback">П</span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord cyrillic_fallback">П</span></span><span class="mord"><span class="mord"><span class="mord mathbf cyrillic_fallback">У</span></span></span><span class="mord text"><span class="mord cyrillic_fallback">Д</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord text"><span class="mord cyrillic_fallback">ДП</span></span><span class="mord"><span class="mord"><span class="mord mathbf cyrillic_fallback">У</span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord cyrillic_fallback">ПД</span></span><span class="mord"><span class="mord"><span class="mord mathbf cyrillic_fallback">У</span></span></span></span></span></span></span></div><p>Всего <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span></span> способов распланировать <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></span> дела на день.</p><hr><p>Предложенный выше алгоритм через фиксацию буквы может подойти не всем.
Кому-то удобнее записывать варианты в алфавитном порядке.
Делайте так, как удобно вам. Главное — <strong>строго придерживайтесь</strong> выбранного алгоритма!</p></div></section></div></div></div><p>В некоторых задачах предстоит работать с числами и цифрами.
Они и так записываются коротко и хорошо друг от друга отличаются.
Поэтому им, обычно, не нужно придумывать уникальные обозначения и первое <a class="link" href="/combinatorics/brute-force/@article/#important:brute-force-rules" data-preview="@article|combinatorics/brute-force|important:brute-force-rules">правило перебора</a> можно считать автоматически выполненным.</p><div class="accentBlock" id="example:number-finder" data-type="example"><div class="side"><div class="type" title="Пример"><i></i></div><div class="expand" title="Решение"><div class="bgOverlay"></div><i class="ic-chevron-up"></i></div></div><div class="base"><div class="main"><section><div class="title">В поисках чисел</div><div class="content" data-content=""><p>Сколько существует четырехзначных чисел, сумма цифр которых меньше <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></span>?</p></div></section></div><div class="expand"><section><div class="title">Решение</div><div class="content" data-content=""><p>Мы работаем с числами, поэтому уникальные обозначения вводить не надо.
Но все еще нужно выполнить второе правило перебора — придумать удобный алгоритм.</p><p>Чтобы не запутаться, не потерять и лишний раз не засчитать числа, будем указывать их в <strong>порядке возрастания</strong>: от маленьких к большим.
То есть каждое следующее число должно быть больше предыдущего.
И помним, что сумма цифр в числе должна быть меньше <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></span>, то есть равна <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span>, <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></span> или <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></span>.</p><div class="mathDisplay"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>1000</mn><mo separator="true">,</mo><mtext> </mtext><mn>1001</mn><mo separator="true">,</mo><mtext> </mtext><mn>1002</mn><mo separator="true">,</mo><mtext> </mtext><mn>1010</mn><mo separator="true">,</mo><mtext> </mtext><mn>1011</mn><mo separator="true">,</mo><mtext> </mtext><mn>1020</mn><mo separator="true">,</mo><mtext> </mtext><mn>1100</mn><mo separator="true">,</mo><mtext> </mtext><mn>1101</mn><mo separator="true">,</mo><mtext> </mtext><mn>1110</mn><mo separator="true">,</mo><mtext> </mtext><mn>1200</mn><mo separator="true">,</mo><mspace linebreak="newline"></mspace><mn>2000</mn><mo separator="true">,</mo><mtext> </mtext><mn>2001</mn><mo separator="true">,</mo><mtext> </mtext><mn>2010</mn><mo separator="true">,</mo><mtext> </mtext><mn>2100</mn><mo separator="true">,</mo><mspace linebreak="newline"></mspace><mn>3000</mn></mrow><annotation encoding="application/x-tex">    1000, \
    1001, \
    1002, \
    1010, \
    1011, \
    1020, \
    1100, \
    1101, \
    1110, \
    1200, \\
    2000, \
    2001, \
    2010, \
    2100, \\
    3000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1000</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1001</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1002</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1010</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1011</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1020</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1100</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1101</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1110</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1200</span><span class="mpunct">,</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2000</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2001</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2010</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2100</span><span class="mpunct">,</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3000</span></span></span></span></span></div></div></section></div></div></div><p>Будем честны, предыдущие примеры вполне можно было решить без всяких правил, просто наобум перебирая дела и числа.
Да, это было бы дольше и не так удобно, но все же возможно.
Рассмотрим теперь пример задачи, которую без правил перебора решить, скорее всего, не выйдет.</p><div class="accentBlock" id="example:hats" data-type="example"><div class="side"><div class="type" title="Пример"><i></i></div><div class="expand" title="Решение"><div class="bgOverlay"></div><i class="ic-chevron-up"></i></div></div><div class="base"><div class="main"><section><div class="title">Задача Эйлера о шляпах</div><div class="content" data-content=""><p>Ресторан посетили <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></span> человека. Свои шляпы они отдали швейцару.
На выходе невнимательный швейцар раздал шляпы случайным образом.
Сколько существует вариантов, когда каждый гость получил чужую шляпу?</p></div></section></div><div class="expand"><section><div class="title">Решение</div><div class="content" data-content=""><p>Дадим каждому человеку свой номер от <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span> до <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></span>.
Каждой шляпе тоже дадим номер. Причем номер шляпы совпадает с номером ее владельца.
Шляпа <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></span> принадлежит гостю <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></span> и так далее.</p><p>Дальше придумаем, как удобно обозначать варианты выдачи шляп.
Будем записывать их в виде набора из четырех цифр, причем позиция цифры означает человека, а сама цифра номер шляпы.
Например, набор <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1234</mn></mrow><annotation encoding="application/x-tex">1234</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1234</span></span></span></span></span> означает, что каждый человек получил свою шляпу.
А набор <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1243</mn></mrow><annotation encoding="application/x-tex">1243</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1243</span></span></span></span></span> означает, что третий человек получил шляпу четвертого, а четвертый шляпу третьего:</p><div class="mathDisplay"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi><mover><mo><mn>1</mn></mo><mrow><mn>1</mn><mtext>ч</mtext></mrow></mover></mi><mtext> </mtext><mi><mover><mo><mn>2</mn></mo><mrow><mn>2</mn><mtext>ч</mtext></mrow></mover></mi><mtext> </mtext><mi><mover><mo><mn>4</mn></mo><mrow><mn>3</mn><mtext>ч</mtext></mrow></mover></mi><mtext> </mtext><mi><mover><mo><mn>3</mn></mo><mrow><mn>4</mn><mtext>ч</mtext></mrow></mover></mi></mrow><annotation encoding="application/x-tex">\overset{1\text{ч}}{1} \ \overset{2\text{ч}}{2} \ \overset{3\text{ч}}{4} \ \overset{4\text{ч}}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3955em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3955em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">1</span></span></span><span style="top:-3.8444em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord text mtight"><span class="mord cyrillic_fallback mtight">ч</span></span></span></span></span></span></span></span></span></span><span class="mspace"> </span><span class="mord"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3955em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">2</span></span></span><span style="top:-3.8444em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord text mtight"><span class="mord cyrillic_fallback mtight">ч</span></span></span></span></span></span></span></span></span></span><span class="mspace"> </span><span class="mord"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3955em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">4</span></span></span><span style="top:-3.8444em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord text mtight"><span class="mord cyrillic_fallback mtight">ч</span></span></span></span></span></span></span></span></span></span><span class="mspace"> </span><span class="mord"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3955em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">3</span></span></span><span style="top:-3.8444em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mord text mtight"><span class="mord cyrillic_fallback mtight">ч</span></span></span></span></span></span></span></span></span></span></span></span></span></span></div><p>Мы свели задачу к тому, что нужно просто найти все наборы из четырех цифр, в которых <strong>позиция каждой цифры не равна самой цифре</strong>.</p><p>Введя подобные обозначения, мы выполнили первое <a class="link" href="/combinatorics/brute-force/@article/#important:brute-force-rules" data-preview="@article|combinatorics/brute-force|important:brute-force-rules">правило</a> прямого перебора.
Но как не запутаться и перечислить все такие наборы цифр?
Для этого надо придумать грамотный алгоритм перебора (<span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></span>-е правило перебора).</p><p>Построим таблицу, в верхней строчке которой укажем номера гостей.
Потом добавляем строки с четырехзначными числами в <strong>порядке возрастания</strong>. Следим за тем, чтобы номер шляпы не совпал с номером человека.
Такие варианты вычеркиваем:</p><div class="mathDisplay"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.66em" columnalign="center center center center" columnspacing="1em" rowlines="solid none none none none none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mtext>ч</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mtext>ч</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mtext>ч</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>4</mn><mtext>ч</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>2</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>1</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>3</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mpadded width="+6pt" height="+6pt" lspace="3pt" voffset="3pt" style="border: 0.04em solid red" mathbackground="transparent"><mstyle mathcolor="red"><mtext>4</mtext></mstyle></mpadded></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>2</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>3</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>1</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mpadded width="+6pt" height="+6pt" lspace="3pt" voffset="3pt" style="border: 0.04em solid red" mathbackground="transparent"><mstyle mathcolor="red"><mtext>4</mtext></mstyle></mpadded></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>2</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>4</mn></mstyle></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mpadded width="+6pt" height="+6pt" lspace="3pt" voffset="3pt" style="border: 0.04em solid red" mathbackground="transparent"><mstyle mathcolor="red"><mtext>3</mtext></mstyle></mpadded></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mstyle mathcolor="red"><mn>1</mn></mstyle></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">    \def\arraystretch{1.5}
    \begin{array}{cccc}
        1\text{ч} &amp; 2\text{ч} &amp; 3\text{ч} &amp; 4\text{ч} \\ \hline 
        \color{red} 2 &amp; \color{red} 1 &amp; \color{red} 3 &amp; \fcolorbox{red}{transparent}{\color{red}4} \\
        2 &amp; 1 &amp; 4 &amp; 3 \\
        \color{red} 2 &amp; \color{red} 3 &amp; \color{red} 1 &amp; \fcolorbox{red}{transparent}{\color{red}4} \\
        2 &amp; 3 &amp; 4 &amp; 1 \\
        2 &amp; 4 &amp; 1 &amp; 3 \\
        \color{red} 2 &amp; \color{red} 4 &amp; \fcolorbox{red}{transparent}{\color{red}3} &amp; \color{red} 1
    \end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:12.6em;vertical-align:-6.05em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.55em;"><span style="top:-8.55em;"><span class="pstrut" style="height:8.55em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.55em;"><span style="top:-8.55em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-6.75em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">2</span></span></span><span style="top:-4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">2</span></span></span><span style="top:-1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.05em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.55em;"><span style="top:-8.55em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-6.75em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">1</span></span></span><span style="top:-4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">3</span></span></span><span style="top:-1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.05em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.55em;"><span style="top:-8.55em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-6.75em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">3</span></span></span><span style="top:-4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">1</span></span></span><span style="top:-1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9844em;"><span style="top:-2.9844em;"><span class="pstrut" style="height:3.3244em;"></span><span class="stretchy fcolorbox" style="height:1.3244em;border-style:solid;border-width:0.04em;background-color:transparent;border-color:red;"></span></span><span style="top:-3.3244em;"><span class="pstrut" style="height:3.3244em;"></span><span class="mord boxpad"><span class="mord" style="color:red;">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.34em;"><span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.05em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.55em;"><span style="top:-8.55em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-6.75em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9844em;"><span style="top:-2.9844em;"><span class="pstrut" style="height:3.3244em;"></span><span class="stretchy fcolorbox" style="height:1.3244em;border-style:solid;border-width:0.04em;background-color:transparent;border-color:red;"></span></span><span style="top:-3.3244em;"><span class="pstrut" style="height:3.3244em;"></span><span class="mord boxpad"><span class="mord" style="color:red;">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.34em;"><span></span></span></span></span></span></span></span><span style="top:-4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9844em;"><span style="top:-2.9844em;"><span class="pstrut" style="height:3.3244em;"></span><span class="stretchy fcolorbox" style="height:1.3244em;border-style:solid;border-width:0.04em;background-color:transparent;border-color:red;"></span></span><span style="top:-3.3244em;"><span class="pstrut" style="height:3.3244em;"></span><span class="mord boxpad"><span class="mord" style="color:red;">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.34em;"><span></span></span></span></span></span></span></span><span style="top:-1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord" style="color:red;">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.05em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-13.3em;"><span class="pstrut" style="height:8.55em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.05em;"><span></span></span></span></span></span></span></span></span></span></div><p>Красным цветом помечены неподходящие варианты, то есть когда гость получил свою шляпу.
В красную рамочку взяты номера шляп, которые попали в руки своих владельцев.</p><p>Продолжая в том же духе, после вычеркивания всех лишних наборов, останется таблица во всеми нужными нам вариантами раздачи шляп:</p><div class="mathDisplay"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.66em" columnalign="center center center center" columnspacing="1em" rowlines="solid none none solid none none solid none none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mtext>ч</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mtext>ч</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mtext>ч</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>4</mn><mtext>ч</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">    \def\arraystretch{1.5}
    \begin{array}{cccc}
        1\text{ч} &amp; 2\text{ч} &amp; 3\text{ч} &amp; 4\text{ч} \\ \hline 
        2 &amp; 1 &amp; 4 &amp; 3 \\
        2 &amp; 3 &amp; 4 &amp; 1 \\
        2 &amp; 4 &amp; 1 &amp; 3 \\ \hline
        3 &amp; 1 &amp; 4 &amp; 2 \\
        3 &amp; 4 &amp; 1 &amp; 2 \\
        3 &amp; 4 &amp; 2 &amp; 1 \\ \hline
        4 &amp; 1 &amp; 2 &amp; 3 \\
        4 &amp; 3 &amp; 1 &amp; 2 \\
        4 &amp; 3 &amp; 2 &amp; 1
    \end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:18em;vertical-align:-8.75em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.25em;"><span style="top:-11.25em;"><span class="pstrut" style="height:11.25em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.25em;"><span style="top:-11.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-9.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-7.65em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-5.85em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:8.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.25em;"><span style="top:-11.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-9.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-7.65em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-5.85em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:8.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.25em;"><span style="top:-11.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-9.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-7.65em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-5.85em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:8.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.25em;"><span style="top:-11.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">4</span><span class="mord text"><span class="mord cyrillic_fallback">ч</span></span></span></span><span style="top:-9.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-7.65em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-5.85em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-4.05em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-0.45em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:1.35em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:8.75em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-7.9em;"><span class="pstrut" style="height:11.25em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-13.3em;"><span class="pstrut" style="height:11.25em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-18.7em;"><span class="pstrut" style="height:11.25em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:8.75em;"><span></span></span></span></span></span></span></span></span></span></div><p>Получаем всего <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span></span> вариантов, когда каждый гость получил чужую шляпу.</p></div></section></div></div></div><p>Заметили, что самое сложное в таких задачах — как раз таки выполнить два правила: ввести обозначения и придумать алгоритм?
Но когда оба пункта правил выполнены, то думать уже не надо.
Остается только аккуратно и внимательно перебирать варианты.
Из всего этого следует довольно простой вывод:</p><div class="accentBlock" data-type="important"><div class="side"><div class="type" title="Важно"><i></i></div></div><div class="base"><div class="main"><section><div class="content" data-content=""><p>Если соблюдать <a class="link" href="/combinatorics/brute-force/@article/#important:brute-force-rules" data-preview="@article|combinatorics/brute-force|important:brute-force-rules">правила перебора</a>, то множество комбинаторных задач можно решить полным (прямым) перебором.
Скорее всего это будет долго, но правильный ответ все равно будет получен.</p></div></section></div></div></div><h2 id="auto-heading:Derevo-variantov">Дерево вариантов<a class="hAnchor" href="#auto-heading:Derevo-variantov" title="Ссылка на этот раздел"><i class="ic-link"></i></a></h2><p>В большинстве задач дать элементам уникальные обозначения (выполнить первое правило перебора) не составляет труда.
Проблемы возникают на втором шаге — придумывании алгоритма перебора.
Порой ну никак не получается нащупать удобный механизм.</p><p>Тут главное не отчаиваться, ведь существует универсальный, удобный, наглядный и безотказный механизм, который носит гордое название «<strong>дерево вариантов</strong>».</p><div class="accentBlock" id="definition:tree" data-type="definition"><div class="side"><div class="type" title="Понятие"><i></i></div></div><div class="base"><div class="main"><section><div class="content" data-content=""><p><ab-strong>Дерево вариантов</ab-strong> — универсальный алгоритм построения и перебора комбинаций.</p></div></section></div></div></div><p>Как там говорят?
Любой человек должен создать семью, построить дом и посадить дерево?
Не знаю, что там насчет первых пунктов, но дерево мы с вами сейчас посадим.</p><h3 id="auto-heading:Postroenie-dereva">Построение дерева<a class="hAnchor" href="#auto-heading:Postroenie-dereva" title="Ссылка на этот раздел"><i class="ic-link"></i></a></h3><p>В <a class="link" href="/combinatorics/brute-force/@article/#example:wonderful-day" data-preview="@article|combinatorics/brute-force|example:wonderful-day">первом примере</a> этой статьи мы искали все способы составить расписание на день.
Каждое дело обозначили своей буквой: уборка — «У», домашнее задание — «Д», личный проект — «П».
Таким образом, задача свелась к поиску всех способов записать друг за другом три буквы: «У», «Д» и «П».
Найдем все эти способоы с помощью дерева вариантов.</p><p>Рисуем точку. Это семечко нашего дерева, его стартовый или нулевой <strong>узел</strong>.
На первое место в комбинациях мы можем поставить любую из трех букв.
Поэтому из стартового узла «вырастают» три <strong>ветки</strong> первого уровня.
Три ветки — три буквы:</p><style>img[data-width-id="fb6249f4-9e77-48b4-ba2b-d4e584fa35ca"] { width: 350px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/letters-tree-step-1.svg" data-pswp-width="800" data-pswp-height="264" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/letters-tree-step-1.svg" loading="lazy" data-invertible="" data-width-id="fb6249f4-9e77-48b4-ba2b-d4e584fa35ca"/></a></div><p>Левая ветка у нас отвечает за букву «У».
После этой буквы можно записать «Д» или «П», получая комбинации «УД» и «УП».
Чтобы отобразить это на дереве вариантов, из узла, на котором завершается «У», рисуем еще две ветки для букв «Д» и «П»:</p><style>img[data-width-id="faab6480-a8c1-4b05-be7e-a45bc631a0a2"] { width: 450px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/letters-tree-step-1.5.svg" data-pswp-width="800" data-pswp-height="378" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/letters-tree-step-1.5.svg" loading="lazy" data-invertible="" data-width-id="faab6480-a8c1-4b05-be7e-a45bc631a0a2"/></a></div><p>То же самое происходит и с оставшимимся ветками первого уровня.
Из каждой из них тоже вырастают еще по две ветки второго уровня с нужными буквами:</p><style>img[data-width-id="3b5a0442-f3e5-49c4-b2ff-a76db84a5367"] { width: 450px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/letters-tree-step-2.svg" data-pswp-width="800" data-pswp-height="378" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/letters-tree-step-2.svg" loading="lazy" data-invertible="" data-width-id="3b5a0442-f3e5-49c4-b2ff-a76db84a5367"/></a></div><p>Сейчас на древе у нас изображены все возможные комбинации двух букв (слева направо): «УД», «УП», «ДУ», «ДП», «ПУ», «ПД».
Осталось только каждой из комбинаций добавить третью букву.
Причем для каждой из них эта буква всего одна.</p><p>Единственный способ завершить комбинацию «УД», это добавить к ней букву «П», чтобы получить «УДП».
И так со всеми остальными комбинациями.
Чтобы отобразить это на дереве, из каждого узла второго уровня вырастает одна ветка третьего уровня с соответствующей буквой:</p><style>img[data-width-id="b3e0aae4-b1e4-4e6e-9d97-887162dcf12e"] { width: 450px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/letters-tree-full.svg" data-pswp-width="800" data-pswp-height="478" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/letters-tree-full.svg" loading="lazy" data-invertible="" data-width-id="b3e0aae4-b1e4-4e6e-9d97-887162dcf12e"/></a></div><p>Дерево вариантов готово!
Всего у нас получилось <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span></span> узлов последнего, третьего уровня, а значит есть всего <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span></span> способов записать буквы «У», «Д» и «П».
Рассматривая каждую ветку по отдельности от нулевого узла к третьему, мы получаем все возможные комбинации: «УДП», «УПД», «ДУП» и так далее.</p><div class="accentBlock" id="important:tree-variants" data-type="important"><div class="side"><div class="type" title="Важно"><i></i></div></div><div class="base"><div class="main"><section><div class="content" data-content=""><p>Говоря о «деревьях» мы представляем себе растения, которые растут снизу вверх.
Но в математике <ab-strong>форма и внешний вид деревьев не играют никакой роли</ab-strong>.
Оно может «расти» вверх, вниз, да хоть во все стороны света.
Главное, чтобы были узлы и ветки, и пофиг как они расположены, лишь бы вам было удобно.</p></div></section></div></div></div><h3 id="auto-heading:Derevya-byvayut-raznymi">Деревья бывают разными<a class="hAnchor" href="#auto-heading:Derevya-byvayut-raznymi" title="Ссылка на этот раздел"><i class="ic-link"></i></a></h3><p>Честно говоря, комбинации из трех букв можно и без деревьев найти.
Теперь рассмотрим примеры, которые без деревьев решить будет весьма проблематично.</p><div class="accentBlock" id="example:best-of-the-best" data-type="example"><div class="side"><div class="type" title="Пример"><i></i></div><div class="expand" title="Решение"><div class="bgOverlay"></div><i class="ic-chevron-up"></i></div></div><div class="base"><div class="main"><section><div class="title">Лучшие из лучших</div><div class="content" data-content=""><p>Для полета на Марс требуется собрать команду.
На место командира есть <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></span> кандидата: <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>3</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">c_1, c_2, c_3, c_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.
На место инженера <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></span> кандидата: <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>i</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>i</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">i_1, i_2, i_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.
На место врача тоже <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></span> кандидата: <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_1, v_2, v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.</p><p>Проверка показала, что командир <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">c_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> психологически совместим с инженерами <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">i_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> и <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">i_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> и врачами <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_2, v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.
Командир <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">c_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> — с инженерами <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>i</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">i_1, i_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> и всеми врачами.
Командир <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">c_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> — с инженерами <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>i</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">i_1, i_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> и врачами <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_1, v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.
Командир <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">c_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> — только с инженером <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">i_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> и всеми врачами.</p><p>Кроме того, инженер <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">i_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> психологически несовместим с врачом <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>, инженер <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">i_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> — с врачом <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">v_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> и инженер <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">i_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> — с врачом <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">v_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.</p><p>Сколькими способами при этих условиях может быть составлена команда корабля?</p></div></section></div><div class="expand"><section><div class="title">Решение</div><div class="content" data-content=""><p>Обратите внимание, что в задаче уже за нас ввели уникальные обозначения для каждого кандидата.
То есть первое правило прямого перебора уже выполнено.
Осталось только разобраться с алгоритмом и вот тут нам на помощь приходит дерево вариантов.</p><p>Из стартового угла в разные стороны добавим четыре ветки первого уровня, по одной на каждого капитана:</p><style>img[data-width-id="3324c9c3-dbc4-4c76-a95d-1f27b6818262"] { width: 200px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/team-tree-step-1.svg" data-pswp-width="800" data-pswp-height="804" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/team-tree-step-1.svg" loading="lazy" data-invertible="" data-width-id="3324c9c3-dbc4-4c76-a95d-1f27b6818262"/></a></div><p>Все капитаны, кроме <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">c_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>, совместимы с двумя инженерами.
Поэтому добавляем по две ветки второго уровня трем капитанам и одну ветку второго уровня четвертому капитану:</p><style>img[data-width-id="a1847c31-ea62-4cc2-872d-8b68fa5b82da"] { width: 320px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/team-tree-step-2.svg" data-pswp-width="800" data-pswp-height="696" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/team-tree-step-2.svg" loading="lazy" data-invertible="" data-width-id="a1847c31-ea62-4cc2-872d-8b68fa5b82da"/></a></div><p>Осталось только добавить ветки третьего уровня, которые соответствуют врачам.
Делать это надо аккуратно, учитывая психологическую совместимость.
Например, к ветке <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>i</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">c_1, i_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> можно добавить только одну ветку с врачом <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">v_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>, так как <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">c_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> несовместим с врачом <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">v_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>, и оба <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">c_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> и <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">i_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> не совместимы с врачом <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">v_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.</p><style>img[data-width-id="7de94fee-5ad3-46f8-8aa1-d77ca962f4a7"] { width: 450px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/team-tree-full.svg" data-pswp-width="800" data-pswp-height="672" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/team-tree-full.svg" loading="lazy" data-invertible="" data-width-id="7de94fee-5ad3-46f8-8aa1-d77ca962f4a7"/></a></div><p>Получили всего <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></span> узлов третьего уровня на концах своих веток.
Это означает, что при данных нам условиях мы можем собрать <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span></span> разных команд для корабля.</p></div></section></div></div></div><p>Помните <a class="link" href="/combinatorics/brute-force/@article/#example:hats" data-preview="@article|combinatorics/brute-force|example:hats">задачу</a> Эйлера про шляпы?
Не факт, что каждый догадается построить удобную таблицу и перебирать комбинации в порядке возрастания.
Ничего страшного!
Именно для таких безвыходных ситуаций и нужны универсальные приемы!
Попробуем использовать дерево.</p><div class="accentBlock" data-type="example"><div class="side"><div class="type" title="Пример"><i></i></div><div class="expand" title="Решение"><div class="bgOverlay"></div><i class="ic-chevron-up"></i></div></div><div class="base"><div class="main"><section><div class="title">Полная шляпа</div><div class="content" data-content=""><p>Решите <a class="link" href="/combinatorics/brute-force/@article/#example:hats" data-preview="@article|combinatorics/brute-force|example:hats">задачу</a> Эйлера о шляпах с помощью дерева вариантов.</p></div></section></div><div class="expand"><section><div class="title">Решение</div><div class="content" data-content=""><p>Ветки первого уровня будут означать номера шляп, которые выдаются первому человеку.
Для удобства номера гостей будем записывать слева от дерева.
Всего <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></span> ветки первого уровня, так как превому человеку можно выдать шляпы с номерами <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">2, 3, 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span></span></span></span></span>.</p><style>img[data-width-id="60b7c265-834a-4602-aea5-59e5a46af24d"] { width: 650px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/hats-tree-step-1.svg" data-pswp-width="800" data-pswp-height="107" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/hats-tree-step-1.svg" loading="lazy" data-invertible="" data-width-id="60b7c265-834a-4602-aea5-59e5a46af24d"/></a></div><p>На втором уровне веток уже идут шляпы, выдаваемые второму гостю.
Здесь не может быть ветки с номером <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></span>, потому что ее нельзя выдать втором гостю.
Более того, номер ветки не должен совпадать с номерами предыдущих веток, из которых она «растет», ведь эти шляпы уже были выданы.</p><style>img[data-width-id="dddad996-08b5-47a1-915b-f4e4a50d7bb1"] { width: 650px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/hats-tree-step-2.svg" data-pswp-width="800" data-pswp-height="176" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/hats-tree-step-2.svg" loading="lazy" data-invertible="" data-width-id="dddad996-08b5-47a1-915b-f4e4a50d7bb1"/></a></div><p>Продолжаем в таком же духе строить дерево кобминаций выдачи шляп.
Некоторые из веток будет невозможно продолжить.
Их помечаем крестиком.
В итоге получится вот такое дерево:</p><style>img[data-width-id="aa7d7eab-6370-46c5-91b2-f4ecaebaa29e"] { width: 650px; }</style><div class="image"><a href="/site/files/combinatorics/brute-force/assets/hats-tree-full.svg" data-pswp-width="800" data-pswp-height="325" data-pswp-single="" target="_blank"><img src="/site/files/combinatorics/brute-force/assets/hats-tree-full.svg" loading="lazy" data-invertible="" data-width-id="aa7d7eab-6370-46c5-91b2-f4ecaebaa29e"/></a></div><p>Всего до самого «верха» дерева «доросли» только <span class="mathInline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span></span> веток. Это и есть все возможные варианты выдать каждому гостю чужую шляпу!</p></div></section></div></div></div><h3 id="auto-heading:Problemy-derevev">Проблемы деревьев<a class="hAnchor" href="#auto-heading:Problemy-derevev" title="Ссылка на этот раздел"><i class="ic-link"></i></a></h3><p>Дерево вариантов — мощный универсальный способ решать комбинаторные задачи прямым перебором.
Но у него есть и недостаток — оно быстро разрастается в размерах и вам может просто не хватить места, чтобы указать все возможные варианты.</p><p>Другой очевидный минус — «универсальный» вовсе не означает «лучший». Зачастую можно придумать свой алгоритм, с которым задачу получится решить гораздо быстрее.
Отсюда очевидный вывод:</p><div class="accentBlock" id="important:use-imagination" data-type="important"><div class="side"><div class="type" title="Важно"><i></i></div></div><div class="base"><div class="main"><section><div class="title">Экспериментируйте!</div><div class="content" data-content=""><p>В бою все средства хороши!
Придумывайте разные обозначения и алгоритмы!
Используйте таблицы, деревья, ритуальные танцы с бубном, да все что угодно, чтобы упростить себе задачу перебора!</p><p>Все зависит только от вашего умения выделить главную суть задачи и подать ее так, чтобы было удобно перебирать варианты.</p></div></section></div></div></div></div><footer><div class="typeNavBlock"><a class="button" data-current><i class="i-file-lines"></i><div class="label">Статья</div><div class="desc">Разобраться в теме</div></a><a class="button" href="../@summary"><i class="i-topic-summary"></i><div class="label">Конспект</div><div class="desc">Запомнить важное</div></a><a class="button" href="../@practicum"><i class="i-topic-practicum"></i><div class="label">Практикум</div><div class="desc">Закрепить задачами</div></a></div><div class="topicNavBlock"><a class="previous" href="/combinatorics/preface/@article"><i class="i-arrow-left"></i><span class="short">Назад</span><span class="long">Что такое комбинаторика?</span></a><div class="sep"></div><a class="next" href="/combinatorics/rules/sum/@article"><span class="short">Дальше</span><span class="long">Правило сложения</span><i class="i-arrow-right"></i></a></div><div class="ads afterContent"><div id="yandex_rtb_R-A-2185026-1"></div><script>window.yaContextCb.push(()=>{
    Ya.Context.AdvManager.render({
        renderTo: 'yandex_rtb_R-A-2185026-1',
        blockId: 'R-A-2185026-1'
    })
})</script></div></footer></article><div class="expand"></div><div class="bottomSticky"><div class="asideControls"><button class="majorOpen"><i class="i-aside-open" style="transform: scale(-1, 1)"></i></button><button class="minorOpen"><i class="i-aside-open"></i></button></div><section id="preview"><div class="display"><div class="border"></div><div class="screen loading" data-state><div class="inner"><i class="i-omath"></i></div></div><div class="screen error" data-state><div class="inner"><i class="i-warning"></i></div></div></div><footer><div class="title">Превью</div><div class="controls"><a class="button goto" title="Источник" target="_blank" href=""><i class="i-up-right-from-square"></i></a><div class="button back" title="Назад"><i class="i-arrow-left"></i></div><div class="button mini" data-label-collapse="Свернуть" data-label-expand="Развернуть"><i class="i-compress"></i><i class="i-expand"></i></div><div class="button exit" title="Закрыть"><i class="i-xmark"></i></div></div></footer></section></div></main><!-- Yandex.Metrika counter -->
<script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
 
    ym(70781320, "init", {
         clickmap:true,
         trackLinks:true,
         accurateTrackBounce:true
    });
 </script>
 <noscript><div><img src="https://mc.yandex.ru/watch/70781320" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
 <!-- /Yandex.Metrika counter --><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NE4S66HSF0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NE4S66HSF0');
</script></body></html>